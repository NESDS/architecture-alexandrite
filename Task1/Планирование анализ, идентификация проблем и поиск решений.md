# –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: –∞–Ω–∞–ª–∏–∑, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º –∏ –ø–æ–∏—Å–∫ —Ä–µ—à–µ–Ω–∏–π

## 1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–µ—Å—Ç

### 1.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤–ª–∏—è—é—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å)

**–ü1. –ü–æ—Ç–µ—Ä—è –∑–∞–∫–∞–∑–æ–≤ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏**
- –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—ã
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≥–¥–µ "–∑–∞—Å—Ç—Ä–µ–≤–∞—é—Ç" –∑–∞–∫–∞–∑—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–π—Å–∏–Ω–≥ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —á–µ—Ä–µ–∑ MES ‚Üí RabbitMQ ‚Üí CRM
- –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–ü2. –£–∑–∫–æ–µ –≥–æ—Ä–ª–æ: Single Point of Failure**
- –ü–æ 1 –∏–Ω—Å—Ç–∞–Ω—Å—É –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Shop API, CRM API, MES API)
- –ï—Å–ª–∏ –∏–Ω—Å—Ç–∞–Ω—Å –ø–∞–¥–∞–µ—Ç - –≤–µ—Å—å —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: 1 –∏–Ω—Å—Ç–∞–Ω—Å –Ω–∞ –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ (–Ω–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏)
- RabbitMQ: –≤–µ—Ä–æ—è—Ç–Ω–æ —Ç–æ–∂–µ 1 –∏–Ω—Å—Ç–∞–Ω—Å

**–ü3. –ü—Ä–æ–±–ª–µ–º—ã —Å RabbitMQ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏**
- –û—á–µ—Ä–µ–¥—å –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ø–æ—Ç–æ–∫–æ–º –∑–∞–∫–∞–∑–æ–≤ –æ—Ç B2B API
- –í–æ–∑–º–æ–∂–Ω—ã –ø–æ—Ç–µ—Ä–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–µ
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ retry –∏ dead letter queue
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π (–¥–ª–∏–Ω–∞, –∑–∞–¥–µ—Ä–∂–∫–∏)

**–ü4. –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞ MES**
- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ –∑–∞–∫–∞–∑—ã –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- N+1 –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —Å–ø–∏—Å–∫–∞
- –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö (—Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è)

**–ü5. –î–æ–ª–≥–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (2-30 –º–∏–Ω—É—Ç)**
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- B2B –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç —Ç–∞–π–º–∞—É—Ç—ã
- –ù–µ—Ç –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 1.2 –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã)

**–ü6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
- –†—É—á–Ω–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–ª–∏–∑—ã –Ω–∞ –Ω–µ–¥–µ–ª–∏/–º–µ—Å—è—Ü—ã
- –†–µ–≥—Ä–µ—Å—Å–∏—è –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç—Å—è –≤–æ–≤—Ä–µ–º—è
- –†–∞—Å—Ç–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

**–ü7. –†–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö**
- Shop DB —Ö—Ä–∞–Ω–∏—Ç –∑–∞–∫–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
- MES DB —Ö—Ä–∞–Ω–∏—Ç –∑–∞–∫–∞–∑—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø—Ä–∞–≤–¥—ã (Single Source of Truth)
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤

**–ü8. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î**
- 1 –∏–Ω—Å—Ç–∞–Ω—Å –Ω–∞ –∑–∞–ø–∏—Å—å/—á—Ç–µ–Ω–∏–µ –Ω–µ –≤—ã–¥–µ—Ä–∂–∏—Ç –¥–∞–ª—å–Ω–µ–π—à–∏–π —Ä–æ—Å—Ç
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç read-—Ä–µ–ø–ª–∏–∫–∏ –¥–ª—è —Ä–∞–∑–≥—Ä—É–∑–∫–∏
- –ù–µ—Ç —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü9. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting –¥–ª—è B2B API**
- –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç "–∑–∞–≤–∞–ª–∏—Ç—å" —Å–∏—Å—Ç–µ–º—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- –ù–µ—Ç –∫–≤–æ—Ç –∏ —Ç—Ä–æ—Ç–ª–∏–Ω–≥–∞
- –†–∏—Å–∫ DDoS –æ—Ç –ª–µ–≥–∏—Ç–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## 2. –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### –ò1. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Observability (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ + —Ç—Ä–µ–π—Å–∏–Ω–≥ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
**–†–µ—à–∞–µ—Ç:** –ü1
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Prometheus + Grafana –¥–ª—è –º–µ—Ç—Ä–∏–∫ (RPS, latency, errors)
- **–¢—Ä–µ–π—Å–∏–Ω–≥:** Jaeger/Tempo –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** ELK/Loki –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
- **–ê–ª–µ—Ä—Ç–∏–Ω–≥:** –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∞–Ω–æ–º–∞–ª–∏—è—Ö

### –ò2. –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
**–†–µ—à–∞–µ—Ç:** –ü2
- –î–æ–±–∞–≤–∏—Ç—å Load Balancer –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–∏–Ω–∏–º—É–º –ø–æ 2 –∏–Ω—Å—Ç–∞–Ω—Å–∞ (Shop API, CRM API, MES API)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å auto-scaling –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º CPU/Memory
- Health checks –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –Ω–µ–∑–¥–æ—Ä–æ–≤—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤

### –ò3. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
**–†–µ—à–∞–µ—Ç:** –ü2, –ü8
- Shop DB: Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è (1 write, 2+ read)
- MES DB: Master-Slave —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å read-—Ä–µ–ø–ª–∏–∫–∏ –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö SELECT –∑–∞–ø—Ä–æ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling

### –ò4. –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ RabbitMQ
**–†–µ—à–∞–µ—Ç:** –ü3
- –ö–ª–∞—Å—Ç–µ—Ä RabbitMQ (–º–∏–Ω–∏–º—É–º 3 –Ω–æ–¥—ã)
- Dead Letter Exchange –¥–ª—è failed messages
- Retry –º–µ—Ö–∞–Ω–∏–∑–º —Å exponential backoff
- Persistent messages + durable queues
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–µ–π, consumer lag

### –ò5. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è MES –¥–∞—à–±–æ—Ä–¥–∞
**–†–µ—à–∞–µ—Ç:** –ü4
- Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–∫–∞–∑–æ–≤
- Cache Aside pattern: –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç, —á–∏—Ç–∞–µ–º –∏–∑ –ë–î
- TTL: 30-60 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è + –ë–î –∏–Ω–¥–µ–∫—Å—ã

### –ò6. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
**–†–µ—à–∞–µ—Ç:** –ü5
- –î–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (Celery/Bull) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç: `orderId` + —Å—Ç–∞—Ç—É—Å "–≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ"
- Webhook/polling –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è: B2C –≤—ã—à–µ B2B (–∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç –ø–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ)

### –ò7. Rate Limiting –∏ API Gateway
**–†–µ—à–∞–µ—Ç:** –ü9
- API Gateway (Kong/NGINX) –ø–µ—Ä–µ–¥ MES API
- Rate limits: –ø–æ API key, –ø–æ IP
- –ö–≤–æ—Ç—ã –¥–ª—è B2B –∫–ª–∏–µ–Ω—Ç–æ–≤ (tier-based)
- –í–æ–∑–≤—Ä–∞—Ç 429 Too Many Requests –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

### –ò8. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–†–µ—à–∞–µ—Ç:** –ü6
- Cypress/Playwright –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- CI/CD: –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ E2E –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ release
- Parallel execution –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- Smoke tests –Ω–∞ prod –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ò9. Event Sourcing –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
**–†–µ—à–∞–µ—Ç:** –ü7 (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ)
- Unified Events Store –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –∑–∞–∫–∞–∑–∞
- Shop/CRM/MES –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–±—ã—Ç–∏—è, –∞ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- Event Stream –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
- –ü—Ä–æ–µ–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º—ã

### –ò10. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î –∑–∞–ø—Ä–æ—Å–æ–≤
**–†–µ—à–∞–µ—Ç:** –ü4
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `status`, `created_at`, `operator_id`
- –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ JOIN
- EXPLAIN ANALYZE –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Pagination —Å cursor-based –≤–º–µ—Å—Ç–æ offset

---

## 3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤

### üî¥ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—ã–µ 2 –º–µ—Å—è—Ü–∞)

**1. –ò1 - Observability (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ + —Ç—Ä–µ–π—Å–∏–Ω–≥ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)**
- **–ü–æ—á–µ–º—É –ø–µ—Ä–≤–æ–µ:** –ë–µ–∑ —ç—Ç–æ–≥–æ –º—ã "—Å–ª–µ–ø—ã–µ" - –Ω–µ –≤–∏–¥–∏–º –≥–¥–µ —Ç–µ—Ä—è—é—Ç—Å—è –∑–∞–∫–∞–∑—ã
- **–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –≤—ã—è–≤–∏–º —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∑–∞ 1-2 –Ω–µ–¥–µ–ª–∏
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

**2. –ò5 - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ MES –¥–∞—à–±–æ—Ä–¥–∞**
- **–ü–æ—á–µ–º—É:** –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ —Ç–æ—Ä–º–æ–∑–æ–≤
- **–ë—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è:** Redis + –±–∞–∑–æ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ = 1 —Å–ø—Ä–∏–Ω—Ç
- **–°—Ä–∞–∑—É –≤–∏–¥–∏–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**3. –ò4 - –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ RabbitMQ**
- **–ü–æ—á–µ–º—É:** –ø–æ—Ç–µ—Ä—è —Å–æ–æ–±—â–µ–Ω–∏–π = –ø–æ—Ç–µ—Ä—è –∑–∞–∫–∞–∑–æ–≤ = –ø–æ—Ç–µ—Ä—è –¥–µ–Ω–µ–≥
- **DLQ + retry** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è—Ç 80% –ø—Ä–æ–±–ª–µ–º
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏** –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã

### üü° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–º–µ—Å—è—Ü—ã 3-4)

**4. –ò2 - –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π**
- –ü–æ—Å–ª–µ observability —É–≤–∏–¥–∏–º —Ä–µ–∞–ª—å–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–æ—Å—Ç—É
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ SPOF

**5. –ò6 - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏**
- –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è B2B –∫–ª–∏–µ–Ω—Ç–æ–≤
- –£–ª—É—á—à–∏—Ç UX –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**6. –ò7 - Rate Limiting –¥–ª—è API**
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ B2B —Ç—Ä–∞—Ñ–∏–∫–æ–º

### üü¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–º–µ—Å—è—Ü—ã 5-6)

**7. –ò3 - –†–µ–ø–ª–∏–∫–∞—Ü–∏—è –ë–î**
- –ü–æ—Å–ª–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ë–î —Å—Ç–∞–Ω–µ—Ç —É–∑–∫–∏–º –≥–æ—Ä–ª–æ–º
- –í–∞–∂–Ω–æ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

**8. –ò10 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î –∑–∞–ø—Ä–æ—Å–æ–≤**
- –î–æ–ø–æ–ª–Ω–∏—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–Ω–∏–∑–∏—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î

**9. –ò8 - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è E2E**
- –£—Å–∫–æ—Ä–∏—Ç —Ä–µ–ª–∏–∑—ã
- –°–Ω–∏–∑–∏—Ç —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π

### ‚ö™ Backlog (–ø–æ—Å–ª–µ 6 –º–µ—Å—è—Ü–µ–≤)

**10. –ò9 - Event Sourcing**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- –¢—Ä–µ–±—É–µ—Ç –≥–ª—É–±–æ–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –•–æ—Ä–æ—à–æ –∏–º–µ—Ç—å, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ

---

## 4. –¶–µ–ª–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–µ—Ä–µ–∑ 6 –º–µ—Å—è—Ü–µ–≤

### 4.1 –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**Observability Layer:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Grafana (–¥–∞—à–±–æ—Ä–¥—ã)                     ‚îÇ
‚îÇ  ‚Üê Prometheus (–º–µ—Ç—Ä–∏–∫–∏)                 ‚îÇ
‚îÇ  ‚Üê Jaeger (—Ç—Ä–µ–π—Å–∏–Ω–≥)                    ‚îÇ
‚îÇ  ‚Üê Loki/ELK (–ª–æ–≥–∏)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üë‚Üë‚Üë
  (–≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —à–ª—é—Ç –¥–∞–Ω–Ω—ã–µ)
```

**Application Layer:**
```
                    ‚îå‚îÄ‚Üí Shop API (x2 –∏–Ω—Å—Ç–∞–Ω—Å–∞)
Load Balancer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚Üí CRM API (x2 –∏–Ω—Å—Ç–∞–Ω—Å–∞)
                    ‚îî‚îÄ‚Üí MES API (x2 –∏–Ω—Å—Ç–∞–Ω—Å–∞)
                             ‚Üì
                    API Gateway (rate limiting)
```

**Message Queue Layer:**
```
RabbitMQ Cluster (3 –Ω–æ–¥—ã)
‚îú‚îÄ‚îÄ Orders Queue + DLQ
‚îú‚îÄ‚îÄ Status Updates Queue + DLQ
‚îî‚îÄ‚îÄ Price Calculation Queue
        ‚Üì
   Task Workers (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
```

**Data Layer:**
```
Shop DB: Master (W) ‚Üí Replica 1 (R), Replica 2 (R)
MES DB:  Master (W) ‚Üí Replica 1 (R), Replica 2 (R)
Redis Cache Cluster (2 –Ω–æ–¥—ã)
S3 Storage (3d files)
```

### 4.2 –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –≤–∏–¥–∏–º –≤—Å–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–¢—Ä–µ–π—Å–∏–Ω–≥:** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã
- **–ê–ª–µ—Ä—Ç–∏–Ω–≥:** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack/PagerDuty –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** –Ω–µ—Ç SPOF, —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ 1 –Ω–æ–¥—ã
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Å—Ç–∞–Ω—Å—ã –∑–∞ 5 –º–∏–Ω—É—Ç

---

## 5. –¢–æ–ø-3 –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 6 –º–µ—Å—è—Ü–µ–≤

### ü•á –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ 1: –°–∏—Å—Ç–µ–º–∞ Observability (–ò1)

**–ü–æ—á–µ–º—É —ç—Ç–æ #1:**
- **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:** —Å–µ–π—á–∞—Å –º—ã –Ω–µ –∑–Ω–∞–µ–º –ì–î–ï –∏ –ü–û–ß–ï–ú–£ —Ç–µ—Ä—è—é—Ç—Å—è –∑–∞–∫–∞–∑—ã
- **–†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã:** –±–µ–∑ –º–µ—Ç—Ä–∏–∫ –Ω–µ –ø–æ–π–º–µ–º, —á—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
- **–ë—ã—Å—Ç—Ä–∞—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å:** –∑–∞ –ø–µ—Ä–≤—É—é –Ω–µ–¥–µ–ª—é –Ω–∞–π–¥–µ–º 3-5 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- **–ë–∏–∑–Ω–µ—Å-–∏–º–ø–∞–∫—Ç:** –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ–º —Ç–µ—Ä—è—Ç—å –∫—Ä—É–ø–Ω—ã–µ B2B –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç:**
- Prometheus + Grafana (–º–µ—Ç—Ä–∏–∫–∏: RPS, latency, errors –ø–æ –∫–∞–∂–¥–æ–º—É API)
- Jaeger (—Ç—Ä–µ–π—Å–∏–Ω–≥ –∑–∞–∫–∞–∑–æ–≤: Shop ‚Üí MES ‚Üí CRM)
- Loki/ELK (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å correlation ID)
- –ê–ª–µ—Ä—Ç—ã: –¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ RabbitMQ, –≤—ã—Å–æ–∫–∏–π error rate, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–û—Ü–µ–Ω–∫–∞:** 2 —Å–ø—Ä–∏–Ω—Ç–∞ (4 –Ω–µ–¥–µ–ª–∏)
**–ö–æ–º–∞–Ω–¥–∞:** 1 DevOps + 2 backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

### ü•à –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ 2: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ MES + —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ RabbitMQ (–ò5 + –ò4)

**–ü–æ—á–µ–º—É —ç—Ç–æ #2:**
- **–î–≤–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–æ–ª–µ–≤—ã—Ö —Ç–æ—á–∫–∏:** –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –Ω–µ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å + –∑–∞–∫–∞–∑—ã —Ç–µ—Ä—è—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏
- **–ë—ã—Å—Ç—Ä–∞—è –ø–æ–±–µ–¥–∞:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –ø–æ—á—É–≤—Å—Ç–≤—É—é—Ç —É–ª—É—á—à–µ–Ω–∏–µ
- **–ó–∞—â–∏—Ç–∞ –≤—ã—Ä—É—á–∫–∏:** –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –±–µ—Ä—É—Ç –∑–∞–∫–∞–∑—ã –±—ã—Å—Ç—Ä–µ–µ ‚Üí –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç (–ò5 - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ):**
- Redis cluster (2 –Ω–æ–¥—ã: master-replica)
- –ö–µ—à –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞–∫–∞–∑–æ–≤ (TTL 60 —Å–µ–∫)
- Cache invalidation –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- –ò–Ω–¥–µ–∫—Å—ã –ë–î: `(status, created_at)`, `(operator_id, status)`

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç (–ò4 - RabbitMQ):**
- Dead Letter Queue –¥–ª—è –≤—Å–µ—Ö —Ç–æ–ø–∏–∫–æ–≤
- Retry policy: 3 –ø–æ–ø—ã—Ç–∫–∏ —Å exponential backoff
- Persistent messages
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—á–µ—Ä–µ–¥–µ–π –≤ Grafana

**–û—Ü–µ–Ω–∫–∞:** 2 —Å–ø—Ä–∏–Ω—Ç–∞ (4 –Ω–µ–¥–µ–ª–∏)
**–ö–æ–º–∞–Ω–¥–∞:** 1 C# dev (MES) + 1 Java dev (CRM) + 1 DevOps

---

### ü•â –ò–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ 3: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ + –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç (–ò2 + –ò6)

**–ü–æ—á–µ–º—É —ç—Ç–æ #3:**
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ SPOF:** –±–æ–ª—å—à–µ –Ω–µ —É–ø–∞–¥–µ–º –æ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ 1 —Å–µ—Ä–≤–µ—Ä–∞
- **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–æ—Å—Ç—É:** +100 –∑–∞–∫–∞–∑–æ–≤/–º–µ—Å—è—Ü —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ –º–æ—â–Ω–æ—Å—Ç–∏
- **–£–ª—É—á—à–µ–Ω–∏–µ UX –¥–ª—è B2B:** –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –∂–¥—É—Ç 30 –º–∏–Ω—É—Ç —Ä–∞—Å—á–µ—Ç–∞

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç (–ò2 - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ):**
- ALB/NLB –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º API
- Auto-scaling: min 2, max 5 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- Health checks + graceful shutdown
- Session affinity (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç (–ò6 - async —Ä–∞—Å—á–µ—Ç):**
- –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (RabbitMQ worker pattern –∏–ª–∏ Celery –¥–ª—è Python)
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `orderId` + `status: "CALCULATING"`
- Worker –ø—Ä–æ—Ü–µ—Å—Å—ã (3-5 –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Ä–∞—Å—á–µ—Ç—ã
- Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–û—Ü–µ–Ω–∫–∞:** 3 —Å–ø—Ä–∏–Ω—Ç–∞ (6 –Ω–µ–¥–µ–ª—å)
**–ö–æ–º–∞–Ω–¥–∞:** 1 C# dev + 1 Java dev + 1 DevOps + 1 QA

